(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{11:function(e,t,s){},12:function(e,t,s){},14:function(e,t,s){"use strict";s.r(t);var a=s(1),c=s.n(a),n=s(5),i=s.n(n),d=(s(11),s(3)),l=s(2),r=s(6),h=s.n(r),o=(s(12),s(0)),j=function(e){var t=e.text,s=e.body,a=e.header,c=e.timeSinceLastUpdate,n=e.title,i=e.actions,d=e.sendMessage,l=e.id,r=c.shiftTo("seconds").get("seconds")>10;return Object(o.jsx)("div",{className:"col base-device ".concat(r?"disconnected":""),children:Object(o.jsxs)("div",{className:"card shadow-sm",children:[a,Object(o.jsxs)("div",{className:"card-body",children:[Object(o.jsx)("h5",{children:n}),t&&Object(o.jsx)("p",{className:"card-text",children:t}),s,Object(o.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(o.jsx)("div",{className:"btn-group",children:i.map((function(e){return Object(o.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-secondary",onClick:function(){return d(l,e)},children:e.label})}))}),Object(o.jsxs)("small",{className:"text-muted",children:["Last updated"," ",h()(c.valueOf(),{round:!0})," ","ago"]})]})]})]})})},m=function(e){var t=e.payload,s=e.message,a=e.timeSinceLastUpdate,c=e.sendMessage,n=Object(o.jsx)("ul",{children:Object.entries(t).map((function(e){var t=Object(d.a)(e,2),s=t[0],a=t[1];return Object(o.jsxs)("li",{children:[s,": ",a]},s)}))});return Object(o.jsx)(j,{title:s.id,body:n,timeSinceLastUpdate:a,actions:t.actions,sendMessage:c,id:s.id})},b=function(e){var t=e.width,s=e.height,a=e.fill,c=e.className;return Object(o.jsxs)("svg",{id:"bold","enable-background":"new 0 0 24 24",height:s,viewBox:"0 0 24 24",width:t,xmlns:"http://www.w3.org/2000/svg",className:c,children:[Object(o.jsx)("path",{fill:a,d:"m12 3.457c-.414 0-.75-.336-.75-.75v-1.957c0-.414.336-.75.75-.75s.75.336.75.75v1.957c0 .414-.336.75-.75.75z"}),Object(o.jsx)("path",{fill:a,d:"m18.571 6.179c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.061l1.384-1.384c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-1.384 1.384c-.147.146-.339.22-.531.22z"}),Object(o.jsx)("path",{fill:a,d:"m23.25 12.75h-1.957c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h1.957c.414 0 .75.336.75.75s-.336.75-.75.75z"}),Object(o.jsx)("path",{fill:a,d:"m19.955 20.705c-.192 0-.384-.073-.53-.22l-1.384-1.384c-.293-.293-.293-.768 0-1.061s.768-.293 1.061 0l1.384 1.384c.293.293.293.768 0 1.061-.147.147-.339.22-.531.22z"}),Object(o.jsx)("path",{fill:a,d:"m4.045 20.705c-.192 0-.384-.073-.53-.22-.293-.293-.293-.768 0-1.061l1.384-1.384c.293-.293.768-.293 1.061 0s.293.768 0 1.061l-1.384 1.384c-.147.147-.339.22-.531.22z"}),Object(o.jsx)("path",{fill:a,d:"m2.707 12.75h-1.957c-.414 0-.75-.336-.75-.75s.336-.75.75-.75h1.957c.414 0 .75.336.75.75s-.336.75-.75.75z"}),Object(o.jsx)("path",{fill:a,d:"m5.429 6.179c-.192 0-.384-.073-.53-.22l-1.384-1.384c-.293-.293-.293-.768 0-1.061s.768-.293 1.061 0l1.384 1.384c.293.293.293.768 0 1.061-.148.146-.339.22-.531.22z"}),Object(o.jsx)("path",{fill:a,d:"m15 21v1.25c0 .96-.79 1.75-1.75 1.75h-2.5c-.84 0-1.75-.64-1.75-2.04v-.96z"}),Object(o.jsx)("path",{fill:a,d:"m16.41 6.56c-1.64-1.33-3.8-1.85-5.91-1.4-2.65.55-4.8 2.71-5.35 5.36-.56 2.72.46 5.42 2.64 7.07.59.44 1 1.12 1.14 1.91v.01c.02-.01.05-.01.07-.01h6c.02 0 .03 0 .05.01v-.01c.14-.76.59-1.46 1.28-2 1.69-1.34 2.67-3.34 2.67-5.5 0-2.12-.94-4.1-2.59-5.44zm-.66 5.94c-.41 0-.75-.34-.75-.75 0-1.52-1.23-2.75-2.75-2.75-.41 0-.75-.34-.75-.75s.34-.75.75-.75c2.34 0 4.25 1.91 4.25 4.25 0 .41-.34.75-.75.75z"}),Object(o.jsx)("path",{fill:a,d:"m8.93 19.5h.07c-.02 0-.05 0-.07.01z"}),Object(o.jsx)("path",{fill:a,d:"m15.05 19.5v.01c-.02-.01-.03-.01-.05-.01z"})]})},v=function(e){var t=e.payload,s=e.message,a=e.timeSinceLastUpdate,c=e.sendMessage,n="Light is ".concat(t.power?"On":"Off");return Object(o.jsx)(j,{header:Object(o.jsx)(b,{width:320,height:320,className:"bd-placeholder-img card-img-top lamp",fill:t.power?"red":"black"}),title:s.id,text:n,timeSinceLastUpdate:a,actions:t.actions,sendMessage:c,id:s.id})},u=function(e){var t=e.width,s=e.height,a=e.className,c=e.waterLevel/100*86;return Object(o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:t,height:s,viewBox:"0 0 128 128",className:a,children:[Object(o.jsx)("rect",{width:"72",height:c,fill:"blue",x:"28",y:86-c+30}),Object(o.jsxs)("g",{children:[Object(o.jsx)("path",{d:"M94.808,96.47a1.751,1.751,0,0,0,1.75-1.75v-7a1.75,1.75,0,0,0-3.5,0v7A1.75,1.75,0,0,0,94.808,96.47Z"}),Object(o.jsx)("path",{d:"M121.5,113.75h-2.69V76a16.759,16.759,0,0,0-16.25-16.725V31.942h1.248a1.75,1.75,0,0,0,1.75-1.75v-6a1.751,1.751,0,0,0-1.75-1.75h-1.416A13.642,13.642,0,0,0,88.81,10.75H68.75V6.5A1.75,1.75,0,0,0,67,4.75H61A1.75,1.75,0,0,0,59.25,6.5v4.25H39.19A13.642,13.642,0,0,0,25.608,22.442H24.192a1.751,1.751,0,0,0-1.75,1.75v6a1.75,1.75,0,0,0,1.75,1.75H25.44V59.275A16.759,16.759,0,0,0,9.19,76v37.75H6.5a1.75,1.75,0,0,0-1.75,1.75v6a1.75,1.75,0,0,0,1.75,1.75h115a1.75,1.75,0,0,0,1.75-1.75v-6A1.75,1.75,0,0,0,121.5,113.75ZM115.31,76v37.75h-2.5V76a10.755,10.755,0,0,0-10.25-10.725v-2.5A13.256,13.256,0,0,1,115.31,76Zm-12.75,37.75V68.775A7.254,7.254,0,0,1,109.31,76v37.75Zm-3.5,0H73.75V31.942H99.06ZM27.215,28.442l-.025,0-.024,0H25.942v-2.5h76.116v2.5h-1.224l-.024,0-.025,0ZM70.25,60.378v5.979H57.75V60.378Zm-12.5-3.5V50.9h12.5v5.979Zm12.5,12.979v5.978H57.75V69.857Zm0,9.478v5.979H57.75V79.335Zm0,9.479v5.979H57.75V88.814Zm0-41.415H57.75V41.421h12.5ZM57.75,98.293h12.5v5.978H57.75Zm12.5-66.351v5.979H57.75V31.942Zm-12.5,75.829h12.5v5.979H57.75Zm5-99.521h2.5v2.5h-2.5Zm-23.56,6H88.81a10.167,10.167,0,0,1,10.033,8.192H29.157A10.167,10.167,0,0,1,39.19,14.25ZM54.25,31.942V113.75H28.94V31.942ZM18.69,113.75V76a7.254,7.254,0,0,1,6.75-7.225V113.75ZM12.69,76A13.256,13.256,0,0,1,25.44,62.775v2.5A10.755,10.755,0,0,0,15.19,76v37.75h-2.5Zm107.06,43.75H8.25v-2.5h111.5Z"})]})]})},O=function(e){var t=e.payload,s=e.message,a=e.timeSinceLastUpdate,c=e.sendMessage;return Object(o.jsx)(j,{header:Object(o.jsx)(u,{width:320,height:320,className:"bd-placeholder-img card-img-top",waterLevel:t.water_level}),title:s.id,timeSinceLastUpdate:a,actions:t.actions,sendMessage:c,id:s.id})},p=function(e){var t=e.message,s=e.currentDateTime,a=e.sendMessage,c=l.Interval.fromDateTimes(l.DateTime.fromISO(t.last_updated),s).toDuration();switch(t.last_payload.template){case"light":return Object(o.jsx)(v,{payload:t.last_payload,message:t,timeSinceLastUpdate:c,sendMessage:a});case"water_tank":return Object(o.jsx)(O,{payload:t.last_payload,message:t,timeSinceLastUpdate:c,sendMessage:a});default:return Object(o.jsx)(m,{payload:t.last_payload,message:t,timeSinceLastUpdate:c,sendMessage:a})}};var g=function(){var e=function(){var e=Object(a.useRef)(void 0),t=Object(a.useState)([]),s=Object(d.a)(t,2),c=s[0],n=s[1];return Object(a.useEffect)((function(){return e.current=setInterval((function(){fetch("/list").then((function(e){return e.json()})).then(n)}),1e3),function(){clearInterval(e.current)}}),[n]),c}(),t=Object(a.useCallback)((function(e,t){return fetch("/".concat(e,"/action"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({action:t.id})})}),[]),s=l.DateTime.utc();return Object(o.jsxs)(o.Fragment,{children:[Object(o.jsx)("header",{children:Object(o.jsx)("div",{className:"navbar navbar-dark bg-dark shadow-sm",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("strong",{className:"navbar-brand",children:"Dashboard"})})})}),Object(o.jsx)("main",{children:Object(o.jsx)("div",{className:"py-5 bg-light",children:Object(o.jsx)("div",{className:"container",children:Object(o.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3",children:e.map((function(e){return Object(o.jsx)(p,{message:e,currentDateTime:s,sendMessage:t},e.id)}))})})})})]})},x=function(e){e&&e instanceof Function&&s.e(3).then(s.bind(null,15)).then((function(t){var s=t.getCLS,a=t.getFID,c=t.getFCP,n=t.getLCP,i=t.getTTFB;s(e),a(e),c(e),n(e),i(e)}))};i.a.render(Object(o.jsx)(c.a.StrictMode,{children:Object(o.jsx)(g,{})}),document.getElementById("root")),x()}},[[14,1,2]]]);
//# sourceMappingURL=main.17944310.chunk.js.map